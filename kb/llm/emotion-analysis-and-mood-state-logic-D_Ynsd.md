---
id: D_YnsdVS1zQXnRzPdTnQO
slug: emotion-analysis-and-mood-state-logic-D_Ynsd
type: reference
title: Emotion Analysis and Mood State Logic
topics:
  - llm
  - configuration
keywords:
  - emotion analysis
  - mood state
  - valence
  - logging
  - debug
confidence: 0.8
authority: 0.2
contributor: daisukearamaki
sources: []
created: 2025-12-22T22:45:36.598Z
updated: 2025-12-22T22:45:36.598Z
---

# Emotion Analysis and Mood State Logic

> Explanation of how character text responses are analyzed for emotions and valence to update the internal mood state system.

## Answer

The system utilizes an emotion analysis service (`app.services.emotion`) to process AI character responses and update internal mood states. 

### Process Flow
1. **Input Analysis**: The system analyzes the text generated by the AI (e.g., *"Oh? A compliment, huh? smirks..."*).
2. **Emotion Detection**: It calculates a **Valence Score** (positivity/negativity) and identifies specific emotions (e.g., joy, optimism) with intensity scores.
3. **Mood State Update**: These values are applied against a mood state system, updating values for various moods (neutral, happy, angry, sad, relaxed, etc.).

### Example Log Output
```text
INFO - Detected Emotions: joy, optimism.
INFO - Emotion 'joy' Intensity: 0.33
...
INFO - Current Mood: neutral
INFO - Mood Values:
INFO -   - neutral: 0.50
INFO -   - happy: 0.00
```

---

*Extracted from Discord. Primary contributor: daisukearamaki*